{"ast":null,"code":"var _jsxFileName = \"/Users/pbaid.int/gaffar/client/src/components/project/Gather.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport MeetingComponent from \"./gather/MeetingComponent\";\nimport styles from '../../styles/components/project/Gather.module.css';\nimport MessageTile from \"./gather/MessageTile\";\nimport axios from \"axios\";\nimport config from '../../config.json';\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Gather() {\n  _s();\n  const {\n    login: {\n      user\n    },\n    project: {\n      project_id\n    },\n    gather: {\n      messages\n    }\n  } = useSelector(state => state);\n  const [connected, setConnected] = useState(false);\n  const [messageText, setMessageText] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const chatDiv = document.getElementById(\"scrollMessageChat\");\n    chatDiv.scrollTop = chatDiv.scrollHeight;\n  }, [messages]);\n  const sendMessage = () => {\n    const token = localStorage.getItem(\"token\");\n    const req = {\n      user_id: user._id,\n      name: user.name,\n      img: user.img,\n      msg_data: messageText,\n      project_id: project_id\n    };\n    console.log(req);\n    axios.post(config.SERVER + \"/message/createmessage\", req, {\n      headers: {\n        Authorization: token\n      }\n    }).then(res => {\n      if (res.data.success === false) throw Error(\"Error\");\n      setMessageText('');\n      console.log(\"data\", res.data);\n    }).catch(err => {\n      console.log(err);\n      if (err.response && err.response.data === \"Unauthorized\") return navigate(\"/login\");\n    });\n  };\n  const deleteMessage = id => {\n    const token = localStorage.getItem(\"token\");\n    const req = {\n      message_id: id,\n      project_id\n    };\n    axios.post(config.SERVER + \"/message/deletemessage\", req, {\n      headers: {\n        Authorization: token\n      }\n    }).then(res => {\n      if (res.data.success === false) throw Error(\"Error\");\n\n      // console.log(\"data\", res.data)\n    }).catch(err => {\n      console.log(err);\n      if (err.response && err.response.data === \"Unauthorized\") return navigate(\"/login\");\n    });\n  };\n  if (connected) {\n    return /*#__PURE__*/_jsxDEV(MeetingComponent, {\n      leaveMeeting: () => {\n        setConnected(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 10\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"scrollMessageChat\",\n      className: styles.messageScroll,\n      children: messages.map(msg => {\n        return /*#__PURE__*/_jsxDEV(MessageTile, {\n          id: msg.message_id,\n          name: msg.sender,\n          timeStamp: msg.time_stamp,\n          img: msg.img,\n          senderId: msg.sender_id,\n          text: msg.text,\n          deleteMessage: deleteMessage\n        }, msg.message_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 14\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.activityContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        autoComplete: \"off\",\n        value: messageText,\n        onChange: e => setMessageText(e.target.value),\n        spellCheck: \"false\",\n        placeholder: \"Write your message here...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.sendBtn,\n        onClick: () => sendMessage(),\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 3\n  }, this);\n}\n_s(Gather, \"SlzVmmEw6FexQUWVmEWwDe1M6+4=\", false, function () {\n  return [useSelector, useNavigate];\n});\n_c = Gather;\nvar _c;\n$RefreshReg$(_c, \"Gather\");","map":{"version":3,"names":["useEffect","useState","MeetingComponent","styles","MessageTile","axios","config","useNavigate","useSelector","jsxDEV","_jsxDEV","Gather","_s","login","user","project","project_id","gather","messages","state","connected","setConnected","messageText","setMessageText","navigate","chatDiv","document","getElementById","scrollTop","scrollHeight","sendMessage","token","localStorage","getItem","req","user_id","_id","name","img","msg_data","console","log","post","SERVER","headers","Authorization","then","res","data","success","Error","catch","err","response","deleteMessage","id","message_id","leaveMeeting","fileName","_jsxFileName","lineNumber","columnNumber","className","container","children","messageScroll","map","msg","sender","timeStamp","time_stamp","senderId","sender_id","text","activityContainer","autoComplete","value","onChange","e","target","spellCheck","placeholder","sendBtn","onClick","_c","$RefreshReg$"],"sources":["/Users/pbaid.int/gaffar/client/src/components/project/Gather.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport MeetingComponent from \"./gather/MeetingComponent\"\nimport styles from '../../styles/components/project/Gather.module.css'\nimport MessageTile from \"./gather/MessageTile\"\nimport axios from \"axios\"\nimport config from '../../config.json'\nimport { useNavigate } from \"react-router-dom\"\nimport { useSelector } from \"react-redux\"\n\nexport default function Gather() {\n\tconst { login: { user }, project: { project_id }, gather: { messages } } = useSelector(state => state)\n\n\tconst [connected, setConnected] = useState(false)\n\tconst [messageText, setMessageText] = useState('')\n\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tconst chatDiv = document.getElementById(\"scrollMessageChat\");\n\t\tchatDiv.scrollTop = chatDiv.scrollHeight;\n\t}, [messages])\n\n\tconst sendMessage = () => {\n\t\tconst token = localStorage.getItem(\"token\");\n\n\t\tconst req = {\n\t\t\tuser_id: user._id,\n\t\t\tname: user.name,\n\t\t\timg: user.img,\n\t\t\tmsg_data: messageText,\n\t\t\tproject_id: project_id\n\t\t}\n\n\t\tconsole.log(req)\n\n\t\taxios\n\t\t\t.post(config.SERVER + \"/message/createmessage\", req, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: token,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data.success === false) throw Error(\"Error\");\n\t\t\t\tsetMessageText('')\n\t\t\t\tconsole.log(\"data\", res.data)\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tif (err.response && err.response.data === \"Unauthorized\")\n\t\t\t\t\treturn navigate(\"/login\");\n\t\t\t});\n\t}\n\n\tconst deleteMessage = (id) => {\n\t\tconst token = localStorage.getItem(\"token\");\n\n\t\tconst req = {\n\t\t\tmessage_id: id,\n\t\t\tproject_id\n\t\t}\n\n\t\taxios\n\t\t\t.post(config.SERVER + \"/message/deletemessage\", req, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: token,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data.success === false) throw Error(\"Error\");\n\n\t\t\t\t// console.log(\"data\", res.data)\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tif (err.response && err.response.data === \"Unauthorized\")\n\t\t\t\t\treturn navigate(\"/login\");\n\t\t\t});\n\t}\n\n\tif (connected) {\n\t\treturn <MeetingComponent\n\t\t\tleaveMeeting={() => {\n\t\t\t\tsetConnected(false)\n\t\t\t}}\n\t\t/>\n\t}\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t<div id=\"scrollMessageChat\" className={styles.messageScroll}>\n\t\t\t\t{\n\t\t\t\t\tmessages.map(msg => {\n\t\t\t\t\t\treturn <MessageTile\n\t\t\t\t\t\t\tkey={msg.message_id}\n\t\t\t\t\t\t\tid={msg.message_id}\n\t\t\t\t\t\t\tname={msg.sender}\n\t\t\t\t\t\t\ttimeStamp={msg.time_stamp}\n\t\t\t\t\t\t\timg={msg.img}\n\t\t\t\t\t\t\tsenderId={msg.sender_id}\n\t\t\t\t\t\t\ttext={msg.text}\n\t\t\t\t\t\t\tdeleteMessage={deleteMessage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t<div className={styles.activityContainer}>\n\t\t\t\t<input\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tvalue={messageText}\n\t\t\t\t\tonChange= {e => setMessageText(e.target.value)}\n\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\tplaceholder=\"Write your message here...\"\n\t\t\t\t/>\n\n\t\t\t\t<div className={styles.sendBtn} onClick={() => sendMessage()}>\n\t\t\t\t\t<p>Send</p>\n\t\t\t\t</div>\n\n\t\t\t\t{/* <div className={styles.gatherBtn}\n\t\t\t\t\tonClick={() => setConnected(true)}>\n\t\t\t\t\t<p>Gather</p>\n\t\t\t\t</div> */}\n\n\t\t\t</div>\n\t\t</div>\n\n\t)\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,gBAAgB,MAAM,2BAA2B;AACxD,OAAOC,MAAM,MAAM,mDAAmD;AACtE,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,aAAa;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzC,eAAe,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAChC,MAAM;IAAEC,KAAK,EAAE;MAAEC;IAAK,CAAC;IAAEC,OAAO,EAAE;MAAEC;IAAW,CAAC;IAAEC,MAAM,EAAE;MAAEC;IAAS;EAAE,CAAC,GAAGV,WAAW,CAACW,KAAK,IAAIA,KAAK,CAAC;EAEtG,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EAElD,MAAMuB,QAAQ,GAAGjB,WAAW,CAAC,CAAC;EAE9BP,SAAS,CAAC,MAAM;IACf,MAAMyB,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;IAC5DF,OAAO,CAACG,SAAS,GAAGH,OAAO,CAACI,YAAY;EACzC,CAAC,EAAE,CAACX,QAAQ,CAAC,CAAC;EAEd,MAAMY,WAAW,GAAGA,CAAA,KAAM;IACzB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,MAAMC,GAAG,GAAG;MACXC,OAAO,EAAErB,IAAI,CAACsB,GAAG;MACjBC,IAAI,EAAEvB,IAAI,CAACuB,IAAI;MACfC,GAAG,EAAExB,IAAI,CAACwB,GAAG;MACbC,QAAQ,EAAEjB,WAAW;MACrBN,UAAU,EAAEA;IACb,CAAC;IAEDwB,OAAO,CAACC,GAAG,CAACP,GAAG,CAAC;IAEhB7B,KAAK,CACHqC,IAAI,CAACpC,MAAM,CAACqC,MAAM,GAAG,wBAAwB,EAAET,GAAG,EAAE;MACpDU,OAAO,EAAE;QACRC,aAAa,EAAEd;MAChB;IACD,CAAC,CAAC,CACDe,IAAI,CAAEC,GAAG,IAAK;MACd,IAAIA,GAAG,CAACC,IAAI,CAACC,OAAO,KAAK,KAAK,EAAE,MAAMC,KAAK,CAAC,OAAO,CAAC;MACpD3B,cAAc,CAAC,EAAE,CAAC;MAClBiB,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEM,GAAG,CAACC,IAAI,CAAC;IAC9B,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,IAAK;MACfZ,OAAO,CAACC,GAAG,CAACW,GAAG,CAAC;MAChB,IAAIA,GAAG,CAACC,QAAQ,IAAID,GAAG,CAACC,QAAQ,CAACL,IAAI,KAAK,cAAc,EACvD,OAAOxB,QAAQ,CAAC,QAAQ,CAAC;IAC3B,CAAC,CAAC;EACJ,CAAC;EAED,MAAM8B,aAAa,GAAIC,EAAE,IAAK;IAC7B,MAAMxB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,MAAMC,GAAG,GAAG;MACXsB,UAAU,EAAED,EAAE;MACdvC;IACD,CAAC;IAEDX,KAAK,CACHqC,IAAI,CAACpC,MAAM,CAACqC,MAAM,GAAG,wBAAwB,EAAET,GAAG,EAAE;MACpDU,OAAO,EAAE;QACRC,aAAa,EAAEd;MAChB;IACD,CAAC,CAAC,CACDe,IAAI,CAAEC,GAAG,IAAK;MACd,IAAIA,GAAG,CAACC,IAAI,CAACC,OAAO,KAAK,KAAK,EAAE,MAAMC,KAAK,CAAC,OAAO,CAAC;;MAEpD;IACD,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;MACfZ,OAAO,CAACC,GAAG,CAACW,GAAG,CAAC;MAChB,IAAIA,GAAG,CAACC,QAAQ,IAAID,GAAG,CAACC,QAAQ,CAACL,IAAI,KAAK,cAAc,EACvD,OAAOxB,QAAQ,CAAC,QAAQ,CAAC;IAC3B,CAAC,CAAC;EACJ,CAAC;EAED,IAAIJ,SAAS,EAAE;IACd,oBAAOV,OAAA,CAACR,gBAAgB;MACvBuD,YAAY,EAAEA,CAAA,KAAM;QACnBpC,YAAY,CAAC,KAAK,CAAC;MACpB;IAAE;MAAAqC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EACH;EAEA,oBACCnD,OAAA;IAAKoD,SAAS,EAAE3D,MAAM,CAAC4D,SAAU;IAAAC,QAAA,gBAChCtD,OAAA;MAAK6C,EAAE,EAAC,mBAAmB;MAACO,SAAS,EAAE3D,MAAM,CAAC8D,aAAc;MAAAD,QAAA,EAE1D9C,QAAQ,CAACgD,GAAG,CAACC,GAAG,IAAI;QACnB,oBAAOzD,OAAA,CAACN,WAAW;UAElBmD,EAAE,EAAEY,GAAG,CAACX,UAAW;UACnBnB,IAAI,EAAE8B,GAAG,CAACC,MAAO;UACjBC,SAAS,EAAEF,GAAG,CAACG,UAAW;UAC1BhC,GAAG,EAAE6B,GAAG,CAAC7B,GAAI;UACbiC,QAAQ,EAAEJ,GAAG,CAACK,SAAU;UACxBC,IAAI,EAAEN,GAAG,CAACM,IAAK;UACfnB,aAAa,EAAEA;QAAc,GAPxBa,GAAG,CAACX,UAAU;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQnB,CAAC;MACH,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEC,CAAC,eAENnD,OAAA;MAAKoD,SAAS,EAAE3D,MAAM,CAACuE,iBAAkB;MAAAV,QAAA,gBACxCtD,OAAA;QACCiE,YAAY,EAAC,KAAK;QAClBC,KAAK,EAAEtD,WAAY;QACnBuD,QAAQ,EAAGC,CAAC,IAAIvD,cAAc,CAACuD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;QAC/CI,UAAU,EAAC,OAAO;QAClBC,WAAW,EAAC;MAA4B;QAAAvB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC,eAEFnD,OAAA;QAAKoD,SAAS,EAAE3D,MAAM,CAAC+E,OAAQ;QAACC,OAAO,EAAEA,CAAA,KAAMrD,WAAW,CAAC,CAAE;QAAAkC,QAAA,eAC5DtD,OAAA;UAAAsD,QAAA,EAAG;QAAI;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAOF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAGR;AAACjD,EAAA,CAvHuBD,MAAM;EAAA,QAC8CH,WAAW,EAKrED,WAAW;AAAA;AAAA6E,EAAA,GANLzE,MAAM;AAAA,IAAAyE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}